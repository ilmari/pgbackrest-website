<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>pgBackRest Configuration Reference: general</title><meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<meta content="pgBackRest - Reliable PostgreSQL Backup &amp; Restore" property="og:site_name">
<meta content="pgBackRest Configuration Reference: general" property="og:title">
<meta content="website" property="og:type">
<link href="favicon.png" rel="icon" type="image/png">
<meta content="image/png" property="og:image:type">
<meta content="http://www.pgbackrest.org/logo.png" property="og:image">
<meta content="The pgBackRest Configuration Reference details all configuration options." name="description">
<meta content="The pgBackRest Configuration Reference details all configuration options." property="og:description">
<link href="default.css" rel="stylesheet" type="text/css">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-VKCRNV73H1"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js',new Date());gtag('config','G-VKCRNV73H1');</script>
</head><body><div class="section1"><a id="section-general"></a><div class="section1-header"><div class="section1-number">
4
</div><div class="section1-title">
General Options (<span class="id">general</span>)
</div></div><div class="section-intro">
The <span class="br-setting">general</span> section defines options that are common for many commands.
</div><div class="section-body"><div class="section2"><a id="section-general/option-buffer-size"></a><div class="section2-header"><div class="section2-number">
4.1
</div><div class="section2-title">
Buffer Size Option (<span class="id">--buffer-size</span>)
</div></div><div class="section-body"><div class="section-body-text">
Buffer size for I/O operations.
</div><div class="section-body-text">
Buffer size used for copy, compress, encrypt, and other operations. The number of buffers used depends on options and each operation may use additional memory, e.g. <span class="id">gz</span> compression may use an additional 256KiB of memory.<br>
<br>
Allowed values are <span class="id">16KiB</span>, <span class="id">32KiB</span>, <span class="id">64KiB</span>, <span class="id">128KiB</span>, <span class="id">256KiB</span>, <span class="id">512KiB</span>, <span class="id">1MiB</span>, <span class="id">2MiB</span>, <span class="id">4MiB</span>, <span class="id">8MiB</span>, and <span class="id">16MiB</span>.
</div>
<pre class="code-block">default: 1MiB
example: buffer-size=2MiB</pre>
</div></div><div class="section2"><a id="section-general/option-cmd"></a><div class="section2-header"><div class="section2-number">
4.2
</div><div class="section2-title">
pgBackRest Command Option (<span class="id">--cmd</span>)
</div></div><div class="section-body"><div class="section-body-text">
<span class="backrest">pgBackRest</span> command.
</div><div class="section-body-text">
<span class="backrest">pgBackRest</span> may generate a command string, e.g. when the <span class="cmd">restore</span> command generates the <span class="pg-setting">restore_command</span> setting. The command used to run the <span class="backrest">pgBackRest</span> process will be used in this case unless the <span class="br-option">cmd</span> option is provided.<br>
<div class="admonition"><div class="caution">CAUTION:</div><div class="caution-text">Wrapping the <span class="backrest">pgBackRest</span> command may cause unpredictable behavior and is not recommended.</div></div>
</div>
<pre class="code-block">example: cmd=/var/lib/pgsql/bin/pgbackrest_wrapper.sh</pre>
</div></div><div class="section2"><a id="section-general/option-cmd-ssh"></a><div class="section2-header"><div class="section2-number">
4.3
</div><div class="section2-title">
SSH Client Command Option (<span class="id">--cmd-ssh</span>)
</div></div><div class="section-body"><div class="section-body-text">
SSH client command.
</div><div class="section-body-text">
Use a specific SSH client command when an alternate is desired or the <span class="file">ssh</span> command is not in $PATH.
</div>
<pre class="code-block">default: ssh
example: cmd-ssh=/usr/bin/ssh</pre>
</div></div><div class="section2"><a id="section-general/option-compress"></a><div class="section2-header"><div class="section2-number">
4.4
</div><div class="section2-title">
Compress Option (<span class="id">--compress</span>)
</div></div><div class="section-body"><div class="section-body-text">
Use file compression.
</div><div class="section-body-text">
Backup files are compatible with command-line compression tools.<br>
<br>
This option is now deprecated. The <span class="br-setting">compress-type</span> option should be used instead.
</div>
<pre class="code-block">default: y
example: compress=n</pre>
</div></div><div class="section2"><a id="section-general/option-compress-level"></a><div class="section2-header"><div class="section2-number">
4.5
</div><div class="section2-title">
Compress Level Option (<span class="id">--compress-level</span>)
</div></div><div class="section-body"><div class="section-body-text">
File compression level.
</div><div class="section-body-text">
Sets the level to be used for file compression when <span class="br-setting">compress-type</span> does not equal <span class="id">none</span> or <span class="br-setting">compress=y</span> (deprecated).<br>
<br>
The following are the defaults levels based on <span class="br-setting">compress-type</span> when <span class="br-setting">compress-level</span> is not specified:<br>
<ul class="list-unordered"><li class="list-unordered"><span class="id">bz2</span> - 9</li><li class="list-unordered"><span class="id">gz</span> - 6</li><li class="list-unordered"><span class="id">lz4</span> - 1</li><li class="list-unordered"><span class="id">zst</span> - 3</li></ul>
</div>
<pre class="code-block">example: compress-level=9</pre>
</div></div><div class="section2"><a id="section-general/option-compress-level-network"></a><div class="section2-header"><div class="section2-number">
4.6
</div><div class="section2-title">
Network Compress Level Option (<span class="id">--compress-level-network</span>)
</div></div><div class="section-body"><div class="section-body-text">
Network compression level.
</div><div class="section-body-text">
Sets the network compression level when <span class="br-setting">compress-type=none</span> and the command is not run on the same host as the repository. Compression is used to reduce network traffic but can be disabled by setting <span class="br-setting">compress-level-network=0</span>. When <span class="br-setting">compress-type</span> does not equal <span class="id">none</span> the <span class="br-setting">compress-level-network</span> setting is ignored and <span class="br-setting">compress-level</span> is used instead so that the file is only compressed once.
</div>
<pre class="code-block">default: 3
allowed: 0-9
example: compress-level-network=1</pre>
</div></div><div class="section2"><a id="section-general/option-compress-type"></a><div class="section2-header"><div class="section2-number">
4.7
</div><div class="section2-title">
Compress Type Option (<span class="id">--compress-type</span>)
</div></div><div class="section-body"><div class="section-body-text">
File compression type.
</div><div class="section-body-text">
The following compression types are supported:<br>
<ul class="list-unordered"><li class="list-unordered"><span class="id">none</span> - no compression</li><li class="list-unordered"><span class="id">bz2</span> - bzip2 compression format</li><li class="list-unordered"><span class="id">gz</span> - gzip compression format</li><li class="list-unordered"><span class="id">lz4</span> - lz4 compression format (not available on all platforms)</li><li class="list-unordered"><span class="id">zst</span> - Zstandard compression format (not available on all platforms)</li></ul>
</div>
<pre class="code-block">default: gz
example: compress-type=none</pre>
</div></div><div class="section2"><a id="section-general/option-config"></a><div class="section2-header"><div class="section2-number">
4.8
</div><div class="section2-title">
Config Option (<span class="id">--config</span>)
</div></div><div class="section-body"><div class="section-body-text">
<span class="backrest">pgBackRest</span> configuration file.
</div><div class="section-body-text">
Use this option to specify a different configuration file than the default.
</div>
<pre class="code-block">default: CFGOPTDEF_CONFIG_PATH &quot;/&quot; PROJECT_CONFIG_FILE
example: config=/conf/pgbackrest/pgbackrest.conf</pre>
</div></div><div class="section2"><a id="section-general/option-config-include-path"></a><div class="section2-header"><div class="section2-number">
4.9
</div><div class="section2-title">
Config Include Path Option (<span class="id">--config-include-path</span>)
</div></div><div class="section-body"><div class="section-body-text">
Path to additional <span class="backrest">pgBackRest</span> configuration files.
</div><div class="section-body-text">
Configuration files existing in the specified location with extension <span class="file">.conf</span> will be concatenated with the <span class="backrest">pgBackRest</span> configuration file, resulting in one configuration file.
</div>
<pre class="code-block">default: CFGOPTDEF_CONFIG_PATH &quot;/&quot; PROJECT_CONFIG_INCLUDE_PATH
example: config-include-path=/conf/pgbackrest/conf.d</pre>
</div></div><div class="section2"><a id="section-general/option-config-path"></a><div class="section2-header"><div class="section2-number">
4.10
</div><div class="section2-title">
Config Path Option (<span class="id">--config-path</span>)
</div></div><div class="section-body"><div class="section-body-text">
Base path of <span class="backrest">pgBackRest</span> configuration files.
</div><div class="section-body-text">
This setting is used to override the default base path setting for the <span class="br-option">--config</span> and <span class="br-option">--config-include-path</span> options unless they are explicitly set on the command-line.<br>
<br>
For example, passing only <span class="id">--config-path=/conf/pgbackrest</span> results in the <span class="br-option">--config</span> default being set to <span class="id">/conf/pgbackrest/pgbackrest.conf</span> and the <span class="br-option">--config-include-path</span> default being set to <span class="id">/conf/pgbackrest/conf.d</span>.
</div>
<pre class="code-block">default: CFGOPTDEF_CONFIG_PATH
example: config-path=/conf/pgbackrest</pre>
</div></div><div class="section2"><a id="section-general/option-db-timeout"></a><div class="section2-header"><div class="section2-number">
4.11
</div><div class="section2-title">
Database Timeout Option (<span class="id">--db-timeout</span>)
</div></div><div class="section-body"><div class="section-body-text">
Database query timeout.
</div><div class="section-body-text">
Sets the timeout, in seconds, for queries against the database. This includes the backup start/stop functions which can each take a substantial amount of time. Because of this the timeout should be kept high unless you know that these functions will return quickly (i.e. if you have set <span class="br-setting">start-fast=y</span> and you know that the database cluster will not generate many WAL segments during the backup).<br>
<div class="admonition"><div class="note">NOTE:</div><div class="note-text">The <span class="br-option">db-timeout</span> option must be less than the <span class="br-option">protocol-timeout</span> option.</div></div>
</div>
<pre class="code-block">default: 1800
allowed: 0.1-604800
example: db-timeout=600</pre>
</div></div><div class="section2"><a id="section-general/option-delta"></a><div class="section2-header"><div class="section2-number">
4.12
</div><div class="section2-title">
Delta Option (<span class="id">--delta</span>)
</div></div><div class="section-body"><div class="section-body-text">
Restore or backup using checksums.
</div><div class="section-body-text">
During a restore, by default the <span class="postgres">PostgreSQL</span> data and tablespace directories are expected to be present but empty. This option performs a delta restore using checksums.<br>
<br>
During a backup, this option will use checksums instead of the timestamps to determine if files will be copied.
</div>
<pre class="code-block">default: n
example: delta=y</pre>
</div></div><div class="section2"><a id="section-general/option-dry-run"></a><div class="section2-header"><div class="section2-number">
4.13
</div><div class="section2-title">
Dry Run Option (<span class="id">--dry-run</span>)
</div></div><div class="section-body"><div class="section-body-text">
Execute a dry-run for the command.
</div><div class="section-body-text">
The <span class="br-option">--dry-run</span> option is a command-line only option and can be passed when it is desirable to determine what modifications will be made by the command without the command actually making any modifications.
</div>
<pre class="code-block">default: n
example: dry-run=y</pre>
</div></div><div class="section2"><a id="section-general/option-io-timeout"></a><div class="section2-header"><div class="section2-number">
4.14
</div><div class="section2-title">
I/O Timeout Option (<span class="id">--io-timeout</span>)
</div></div><div class="section-body"><div class="section-body-text">
I/O timeout.
</div><div class="section-body-text">
Timeout, in seconds, used for connections and read/write operations.<br>
<br>
Note that the entire read/write operation does not need to complete within this timeout but <i>some</i> progress must be made, even if it is only a single byte.
</div>
<pre class="code-block">default: 60
allowed: 0.1-3600
example: io-timeout=120</pre>
</div></div><div class="section2"><a id="section-general/option-lock-path"></a><div class="section2-header"><div class="section2-number">
4.15
</div><div class="section2-title">
Lock Path Option (<span class="id">--lock-path</span>)
</div></div><div class="section-body"><div class="section-body-text">
Path where lock files are stored.
</div><div class="section-body-text">
The lock path provides a location for <span class="backrest">pgBackRest</span> to create lock files to prevent conflicting operations from being run concurrently.
</div>
<pre class="code-block">default: /tmp/pgbackrest
example: lock-path=/backup/db/lock</pre>
</div></div><div class="section2"><a id="section-general/option-neutral-umask"></a><div class="section2-header"><div class="section2-number">
4.16
</div><div class="section2-title">
Neutral Umask Option (<span class="id">--neutral-umask</span>)
</div></div><div class="section-body"><div class="section-body-text">
Use a neutral umask.
</div><div class="section-body-text">
Sets the umask to 0000 so modes in the repository are created in a sensible way. The default directory mode is 0750 and default file mode is 0640. The lock and log directories set the directory and file mode to 0770 and 0660 respectively.<br>
<br>
To use the executing user&#39;s umask instead specify <span class="br-setting">neutral-umask=n</span> in the config file or <span class="br-setting">--no-neutral-umask</span> on the command line.
</div>
<pre class="code-block">default: y
example: neutral-umask=n</pre>
</div></div><div class="section2"><a id="section-general/option-process-max"></a><div class="section2-header"><div class="section2-number">
4.17
</div><div class="section2-title">
Process Maximum Option (<span class="id">--process-max</span>)
</div></div><div class="section-body"><div class="section-body-text">
Max processes to use for compress/transfer.
</div><div class="section-body-text">
Each process will perform compression and transfer to make the command run faster, but don&#39;t set <span class="br-setting">process-max</span> so high that it impacts database performance.
</div>
<pre class="code-block">default: 1
allowed: 1-999
example: process-max=4</pre>
</div></div><div class="section2"><a id="section-general/option-protocol-timeout"></a><div class="section2-header"><div class="section2-number">
4.18
</div><div class="section2-title">
Protocol Timeout Option (<span class="id">--protocol-timeout</span>)
</div></div><div class="section-body"><div class="section-body-text">
Protocol timeout.
</div><div class="section-body-text">
Sets the timeout, in seconds, that the local or remote process will wait for a new message to be received on the protocol layer. This prevents processes from waiting indefinitely for a message.<br>
<div class="admonition"><div class="note">NOTE:</div><div class="note-text">The <span class="br-option">protocol-timeout</span> option must be greater than the <span class="br-option">db-timeout</span> option.</div></div>
</div>
<pre class="code-block">default: 1830
allowed: 0.1-604800
example: protocol-timeout=630</pre>
</div></div><div class="section2"><a id="section-general/option-raw"></a><div class="section2-header"><div class="section2-number">
4.19
</div><div class="section2-title">
Raw Data Option (<span class="id">--raw</span>)
</div></div><div class="section-body"><div class="section-body-text">
Do not transform data.
</div><div class="section-body-text">
Do not transform (i.e, encrypt, decompress, etc.) data for the current command.
</div>
<pre class="code-block">default: n
example: raw=y</pre>
</div></div><div class="section2"><a id="section-general/option-sck-keep-alive"></a><div class="section2-header"><div class="section2-number">
4.20
</div><div class="section2-title">
Keep Alive Option (<span class="id">--sck-keep-alive</span>)
</div></div><div class="section-body"><div class="section-body-text">
Keep-alive enable.
</div><div class="section-body-text">
Enables keep-alive messages on socket connections.
</div>
<pre class="code-block">default: y
example: sck-keep-alive=n</pre>
</div></div><div class="section2"><a id="section-general/option-spool-path"></a><div class="section2-header"><div class="section2-number">
4.21
</div><div class="section2-title">
Spool Path Option (<span class="id">--spool-path</span>)
</div></div><div class="section-body"><div class="section-body-text">
Path where transient data is stored.
</div><div class="section-body-text">
This path is used to store data for the asynchronous <span class="cmd">archive-push</span> and <span class="cmd">archive-get</span> command.<br>
<br>
The asynchronous <span class="cmd">archive-push</span> command writes acknowledgements into the spool path when it has successfully stored WAL in the archive (and errors on failure) so the foreground process can quickly notify <span class="postgres">PostgreSQL</span>. Acknowledgement files are very small (zero on success and a few hundred bytes on error).<br>
<br>
The asynchronous <span class="cmd">archive-get</span> command queues WAL in the spool path so it can be provided very quickly when <span class="postgres">PostgreSQL</span> requests it. Moving files to <span class="postgres">PostgreSQL</span> is most efficient when the spool path is on the same filesystem as <span class="path">pg_xlog</span>/<span class="path">pg_wal</span>.<br>
<br>
The data stored in the spool path is not strictly temporary since it can and should survive a reboot. However, loss of the data in the spool path is not a problem. <span class="backrest">pgBackRest</span> will simply recheck each WAL segment to ensure it is safely archived for <span class="cmd">archive-push</span> and rebuild the queue for <span class="cmd">archive-get</span>.<br>
<br>
The spool path is intended to be located on a local Posix-compatible filesystem, not a remote filesystem such as <span class="host">NFS</span> or <span class="host">CIFS</span>.
</div>
<pre class="code-block">default: /var/spool/pgbackrest
example: spool-path=/backup/db/spool</pre>
</div></div><div class="section2"><a id="section-general/option-stanza"></a><div class="section2-header"><div class="section2-number">
4.22
</div><div class="section2-title">
Stanza Option (<span class="id">--stanza</span>)
</div></div><div class="section-body"><div class="section-body-text">
Defines the stanza.
</div><div class="section-body-text">
A stanza is the configuration for a <span class="postgres">PostgreSQL</span> database cluster that defines where it is located, how it will be backed up, archiving options, etc. Most db servers will only have one <span class="postgres">PostgreSQL</span> database cluster and therefore one stanza, whereas backup servers will have a stanza for every database cluster that needs to be backed up.<br>
<br>
It is tempting to name the stanza after the primary cluster but a better name describes the databases contained in the cluster. Because the stanza name will be used for the primary and all replicas it is more appropriate to choose a name that describes the actual function of the cluster, such as app or dw, rather than the local cluster name, such as main or prod.
</div>
<pre class="code-block">example: stanza=main</pre>
</div></div><div class="section2"><a id="section-general/option-tcp-keep-alive-count"></a><div class="section2-header"><div class="section2-number">
4.23
</div><div class="section2-title">
Keep Alive Count Option (<span class="id">--tcp-keep-alive-count</span>)
</div></div><div class="section-body"><div class="section-body-text">
Keep-alive count.
</div><div class="section-body-text">
Specifies the number of TCP keep-alive messages that can be lost before the connection is considered dead.<br>
<br>
This option is available on systems that support the <span class="id">TCP_KEEPCNT</span> socket option.
</div>
<pre class="code-block">allowed: 1-32
example: tcp-keep-alive-count=3</pre>
</div></div><div class="section2"><a id="section-general/option-tcp-keep-alive-idle"></a><div class="section2-header"><div class="section2-number">
4.24
</div><div class="section2-title">
Keep Alive Idle Option (<span class="id">--tcp-keep-alive-idle</span>)
</div></div><div class="section-body"><div class="section-body-text">
Keep-alive idle time.
</div><div class="section-body-text">
Specifies the amount of time (in seconds) with no network activity after which the operating system should send a TCP keep-alive message.<br>
<br>
This option is available on systems that support the <span class="id">TCP_KEEPIDLE</span> socket option.
</div>
<pre class="code-block">allowed: 1-3600
example: tcp-keep-alive-idle=60</pre>
</div></div><div class="section2"><a id="section-general/option-tcp-keep-alive-interval"></a><div class="section2-header"><div class="section2-number">
4.25
</div><div class="section2-title">
Keep Alive Interval Option (<span class="id">--tcp-keep-alive-interval</span>)
</div></div><div class="section-body"><div class="section-body-text">
Keep-alive interval time.
</div><div class="section-body-text">
Specifies the amount of time (in seconds) after which a TCP keep-alive message that has not been acknowledged should be retransmitted.<br>
<br>
This option is available on systems that support the <span class="id">TCP_KEEPINTVL</span> socket option.
</div>
<pre class="code-block">allowed: 1-900
example: tcp-keep-alive-interval=30</pre>
</div></div></div></div><div class="page-footer">
Copyright © 2015-2023, The PostgreSQL Global Development Group, <a href="https://github.com/pgbackrest/pgbackrest/blob/main/LICENSE">MIT License</a>. Updated July 24, 2023
</div></body></html>